#!/usr/bin/env python3
"""
æµ‹è¯•ç”¨æˆ·è¾“å…¥æ—¶çš„æ»šåŠ¨åŠŸèƒ½
"""

import sys
import os

# æ·»åŠ å½“å‰ç›®å½•åˆ° Python è·¯å¾„
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from feedback_ui import feedback_ui

def test_input_scroll():
    """æµ‹è¯•ç”¨æˆ·è¾“å…¥æ—¶çš„æ»šåŠ¨åŠŸèƒ½"""
    
    prompt = """è¯·åœ¨ä¸‹æ–¹çš„æ–‡å­—åé¦ˆåŒºåŸŸè¾“å…¥å¤šè¡Œæ–‡æœ¬æ¥æµ‹è¯•æ»šåŠ¨åŠŸèƒ½ã€‚

æµ‹è¯•æ­¥éª¤ï¼š
1. åœ¨"æ‚¨çš„æ–‡å­—åé¦ˆ"åŒºåŸŸè¾“å…¥æ–‡å­—
2. è¾“å…¥è¶…è¿‡8è¡Œæ–‡æœ¬
3. è§‚å¯Ÿæ˜¯å¦å‡ºç°å‚ç›´æ»šåŠ¨æ¡
4. æµ‹è¯•é¼ æ ‡æ»šè½®æ˜¯å¦å¯ä»¥æ»šåŠ¨

è¯·è¾“å…¥è¶³å¤Ÿå¤šçš„æ–‡å­—æ¥è§¦å‘æ»šåŠ¨æ¡æ˜¾ç¤ºã€‚"""
    
    print("ğŸ§ª å¯åŠ¨ç”¨æˆ·è¾“å…¥æ»šåŠ¨æµ‹è¯•...")
    print("ğŸ“ è¯·åœ¨åé¦ˆåŒºåŸŸè¾“å…¥å¤šè¡Œæ–‡æœ¬æ¥æµ‹è¯•æ»šåŠ¨åŠŸèƒ½")
    print("ğŸ” è¾“å…¥è¶…è¿‡8è¡Œæ–‡æœ¬åº”è¯¥ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡")
    print()
    
    # å¯åŠ¨åé¦ˆç•Œé¢è¿›è¡Œæµ‹è¯•
    result = feedback_ui(
        project_directory=os.getcwd(),
        prompt=prompt,
        dark_theme=True
    )
    
    if result:
        print("âœ… æµ‹è¯•å®Œæˆ")
        feedback_data = result['interactive_feedback']
        print(f"ğŸ“„ ç”¨æˆ·è¾“å…¥çš„åé¦ˆé•¿åº¦: {len(feedback_data)} å­—ç¬¦")
        if len(feedback_data) > 200:
            print("âœ… è¾“å…¥äº†è¶³å¤Ÿé•¿çš„æ–‡æœ¬ï¼Œæ»šåŠ¨åŠŸèƒ½åº”è¯¥å·²è¢«æµ‹è¯•")
        else:
            print("âš ï¸  è¾“å…¥æ–‡æœ¬è¾ƒçŸ­ï¼Œå¯èƒ½æœªè§¦å‘æ»šåŠ¨æ¡")
    else:
        print("âŒ æµ‹è¯•è¢«å–æ¶ˆ")

if __name__ == "__main__":
    test_input_scroll() 